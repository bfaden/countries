<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Countries Viewer</title>
	<meta name="description" content="Countries Viewer">
	<meta name="author" content="Benjamin Faden">
	<script src="js/vendor/jquery-3.2.1.js"></script> 
</head>
<body>
	<h1> Welcome To Countries Viewer</h1>
	
	<h2>Please search for a country</h2>
	
	<div>
		<form id="country-form">
			<label>Country Name</label>
			<input type="text" name="country-name" id="country-name">
			<input type="submit" id="submit" value="submit">
		</form>
	</div>
	
	<h2>Results</h2>
	
	<table id="output" border="1">
		<thead>
			<tr>
				<td>County Name</td>
				<td>Alpha Code 2</td>
				<td>Alpha Code 3</td>
				<td>Flag</td>
				<td>Region</td>
				<td>Subregion</td>
				<td>Population</td>
				<td>Languages Spoken</td>
			</tr>
		</thead>
		<tbody></tbody>
	</table>
	
	<script>
		$(function() {
			$("#country-form").on("submit", function(event) {
				event.preventDefault();
				
				$.ajax({
					"type"  : "GET",
					"url"     : '../'+$("#country-name").val(),
					dataType: 'json',
					"success" : function(data) {
						$("#output tbody").empty();
						
						$.each(data.results, function(key,value) {
							var languages = $.map(value.languages, function(val, i) {
								return val.name;
							});
							
							$("#output tbody").append(
								"<tr>"
								+ "<td>"+value.name+"</td>"
								+ "<td>"+value.alpha2Code+"</td>"
								+ "<td>"+value.alpha3Code+"</td>"
								+ "<td><img src=\""+value.flag+"\" width=\"100\"></td>"
								+ "<td>"+value.region+"</td>"
								+ "<td>"+value.subregion+"</td>"
								+ "<td>"+value.population+"</td>"
								+ "<td>"+languages.join(", ")+"</td>"
								+ "</tr>"
							);
						});
					},
					"error" : function() {
						alert("this doesn't work");
					}
				});
			})
		});
	</script>
</body>
</html>